var diva=function(){function onScroll(e){for(var i in evts){var evt=evts[i];-1==evt.total||evt.count<evt.total?elementIsInView(evt.element)?evt.triggered||(evt.callback.call(self),evt.triggered=!0,evt.count++):evt.triggered&&(evt.triggered=!1):removeEvent(i)}}function elementIsInView(element){var el=getElementPosition(element);el.width=element.offsetWidth,el.height=element.offsetHeight;var screenUpperBound=window.scrollY,screenLowerBound=window.scrollY+Math.min(window.screen.height,window.innerHeight,window.outerHeight),elementUpperBound=el.top,elementLowerBound=el.top+el.height,screenLeftBound=window.scrollX,screenRightBound=window.scrollX+Math.min(window.screen.width,window.innerWidth,window.innerHeight),elementLeftBound=el.left,elementRightBound=el.left+el.width;return(screenUpperBound>=elementUpperBound&&screenLowerBound>elementUpperBound&&elementLowerBound>screenLowerBound&&elementLowerBound>screenUpperBound||elementUpperBound>=screenUpperBound&&screenLowerBound>elementUpperBound&&elementLowerBound>screenLowerBound||elementLowerBound>=screenUpperBound&&screenLowerBound>elementLowerBound&&screenUpperBound>elementUpperBound)&&(screenLeftBound>=elementLeftBound&&screenRightBound>elementLeftBound&&elementRightBound>screenRightBound&&elementRightBound>screenLeftBound||elementLeftBound>=screenLeftBound&&screenRightBound>elementLeftBound&&elementRightBound>screenRightBound||elementRightBound>=screenLeftBound&&screenRightBound>elementRightBound&&screenLeftBound>elementLeftBound)}function getElementPosition(el){var el2=el,curtop=0,curleft=0;if(document.getElementById||document.all){do for(curleft+=el.offsetLeft-el.scrollLeft,curtop+=el.offsetTop-el.scrollTop,el=el.offsetParent,el2=el2.parentNode;el2!=el;)curleft-=el2.scrollLeft,curtop-=el2.scrollTop,el2=el2.parentNode;while(el.offsetParent)}else document.layers&&(curtop+=el.y,curleft+=el.x);return{top:curtop,left:curleft}}function addEvent(selector,count,callback){var element=selector;"string"==typeof element&&(element.indexOf("#")>-1||-1==element.indexOf(".")?(element=element.replace(/\.|#/g,""),element=document.getElementById(element)):element.indexOf(".")>-1&&(element=element.replace(/\.|#/g,""),element=document.getElementsByClassName(element)[0])),element&&null!==element&&"function"==typeof callback&&(evts.push({selector:"string"==typeof selector?selector:element,element:element,count:0,total:count,callback:callback,triggered:!1}),onScroll())}function removeEvent(at){if("number"==typeof at)evts.splice(index,1);else if("string"==typeof at)for(var i in evts)evts[i].selector===at&&evts.splice(i,1);else if("object"==typeof at)for(var j in evts)evts[j].element===at&&evts.splice(j,1)}var evts=[],self=this;return window.onscroll=onScroll,{events:evts,once:function(selector,callback){addEvent(selector,1,callback)},always:function(selector,callback){addEvent(selector,-1,callback)},sometimes:function(selector,num,callback){addEvent(selector,num,callback)},destroy:function(element){("string"==typeof element||"object"==typeof element)&&removeEvent(element)}}}();